# DepthAI 深度查看器 LR

## 介绍

本脚本使用 DepthAI 库与兼容设备进行交互，获取深度信息，并实时显示视差图。它允许用户实时查看深度信息，以及将深度帧保存为 PNG 文件。

该脚本根据用户的输入来调整感兴趣区域（ROI）和计算算法。用户可以使用键盘按键来操作脚本。

该脚本支持不同的计算算法，包括平均值、最小值、最大值、众数和中位数。

用户可以使用鼠标在图像上单击并拖动来选择感兴趣区域。

## 前提条件和依赖关系

- OAK-D-LR 相机
- Python 3.x 环境
- 库：`depthai`, `opencv-python`, `numpy`

## 安装

安装所需的 Python 库，请执行以下命令：

```bash
pip install depthai opencv-python numpy
```

### 源码

??? note "depth_viewer_lr.py"

    ```python
    --8<-- "src/oak/depth/depth_viewer_lr.py"
    ```

## 用法

在命令行中运行脚本，可以通过参数自定义单目相机帧率和深度相机对。

脚本将连接到深度摄像头设备并启动数据流。用户可以使用键盘按键进行操作：

+ `q`：退出程序
+ `w`：向上移动 ROI
+ `a`：向左移动 ROI
+ `s`：向下移动 ROI
+ `d`：向右移动 ROI
+ `1-5`：切换计算算法

```bash
python depth_viewer_lr.py --fps 30 --stereo_pair LR
```

## 可用参数

- `-sp`, `--stereo_pair`：选择深度相机对（LR、LC、CR）
- `-f`, `--fps`：相机帧率
- `-f`, `--filename`：输出深度数据文件名 (不含后缀)
- ... [以及其他参数]

## 保存深度帧

按下 's' 键可以将当前显示的深度帧保存为 PNG 图像，保存位置在脚本文件所在的目录。

## 示例

启动深度查看器并保存深度帧：

```bash
python depth_viewer_lr.py
```

运行后，按 's' 键即可在脚本所在目录下保存名为 "depth_lr.png" 的深度帧。

## 常见问题解答

!!! info "Q: 该脚本支持哪些深度摄像头设备？"

    A: 该脚本使用 depthai 库，支持 OAK-D-LR 以及使用 AR0234 相机模组的 OAK-FFC。

!!! info "Q: 如何更改感兴趣区域（ROI）？"

    A: 按下键盘上的 `w、a、s、d` 键可以移动 ROI 。

!!! info "Q: 如何切换计算算法？"

    A: 按下键盘上的 `1、2、3、4、5` 键可以切换计算算法。

[//]: # (## 联系方式和贡献)

[//]: # (如有任何疑问或希望贡献代码，请联系项目维护者 [您的姓名]（[您的电子邮件]），或在此项目的 GitHub 页面提交问题或拉取请求。)
